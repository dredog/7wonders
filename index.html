<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 Wonders Duel</title>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.js"></script>
    
    <script type="text/babel">
const { useState } = React;
const { Swords, Trophy, Coins } = lucide;

// Resource symbols as SVG components
const ResourceIcon = ({ type, size = 20 }) => {
  const icons = {
    wood: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="4" y="4" width="16" height="16" rx="2" />
        <path d="M8 4v16M12 4v16M16 4v16" />
      </svg>
    ),
    clay: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor">
        <rect x="6" y="6" width="12" height="12" rx="1" />
        <rect x="8" y="8" width="8" height="8" rx="1" fill="none" stroke="currentColor" strokeWidth="2" />
      </svg>
    ),
    stone: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <path d="M12 2L2 8l10 6 10-6-10-6z" />
        <path d="M2 16l10 6 10-6" />
      </svg>
    ),
    glass: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="8" />
        <path d="M12 4v16M4 12h16" />
      </svg>
    ),
    papyrus: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="6" y="4" width="12" height="16" rx="1" />
        <path d="M9 8h6M9 12h6M9 16h4" />
      </svg>
    )
  };
  return icons[type] || null;
};

const ScienceIcon = ({ type, size = 20 }) => {
  const icons = {
    wheel: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="8" />
        <circle cx="12" cy="12" r="3" />
        <path d="M12 4v5M12 15v5M4 12h5M15 12h5" />
      </svg>
    ),
    compass: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <circle cx="12" cy="12" r="10" />
        <polygon points="12,6 14,12 12,18 10,12" fill="currentColor" />
      </svg>
    ),
    tablet: (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
        <rect x="5" y="2" width="14" height="20" rx="2" />
        <path d="M8 6h8M8 10h8M8 14h5" />
      </svg>
    )
  };
  return icons[type] || null;
};

// Simplified card data
const CARDS = {
  age1: [
    { id: 'lumber-yard', name: 'Lumber Yard', type: 'brown', cost: {}, produces: { wood: 1 }, points: 0 },
    { id: 'clay-pool', name: 'Clay Pool', type: 'brown', cost: {}, produces: { clay: 1 }, points: 0 },
    { id: 'quarry', name: 'Quarry', type: 'brown', cost: {}, produces: { stone: 1 }, points: 0 },
    { id: 'glassworks', name: 'Glassworks', type: 'gray', cost: { coin: 1 }, produces: { glass: 1 }, points: 0 },
    { id: 'press', name: 'Press', type: 'gray', cost: { coin: 1 }, produces: { papyrus: 1 }, points: 0 },
    { id: 'guard-tower', name: 'Guard Tower', type: 'red', cost: { clay: 1 }, military: 1, points: 0 },
    { id: 'stable', name: 'Stable', type: 'red', cost: { wood: 1 }, military: 1, points: 0 },
    { id: 'baths', name: 'Baths', type: 'blue', cost: { stone: 1 }, points: 3 },
    { id: 'altar', name: 'Altar', type: 'blue', cost: {}, points: 3 },
    { id: 'theater', name: 'Theater', type: 'blue', cost: {}, points: 3 },
    { id: 'apothecary', name: 'Apothecary', type: 'green', cost: { glass: 1 }, science: 'compass', points: 0 },
    { id: 'workshop', name: 'Workshop', type: 'green', cost: { papyrus: 1 }, science: 'wheel', points: 0 },
    { id: 'scriptorium', name: 'Scriptorium', type: 'green', cost: { papyrus: 1 }, science: 'tablet', points: 0 },
    { id: 'tavern', name: 'Tavern', type: 'yellow', cost: {}, effect: { coins: 4 }, points: 0 },
    { id: 'palisade', name: 'Palisade', type: 'red', cost: { coin: 2 }, military: 1, points: 0 },
    { id: 'logging-camp', name: 'Logging Camp', type: 'brown', cost: { coin: 1 }, produces: { wood: 1 }, points: 0 },
    { id: 'clay-pit', name: 'Clay Pit', type: 'brown', cost: { coin: 1 }, produces: { clay: 1 }, points: 0 },
    { id: 'stone-pit', name: 'Stone Pit', type: 'brown', cost: { coin: 1 }, produces: { stone: 1 }, points: 0 },
    { id: 'garrison', name: 'Garrison', type: 'red', cost: { clay: 1 }, military: 1, points: 0 },
    { id: 'marketplace', name: 'Marketplace', type: 'yellow', cost: {}, effect: { trade: true }, points: 0 },
    { id: 'barracks', name: 'Barracks', type: 'red', cost: { coin: 3 }, military: 1, points: 0 }
  ]
};

const WONDERS = [
  { id: 'pyramids', name: 'The Pyramids', cost: { stone: 3 }, points: 9 },
  { id: 'colossus', name: 'The Colossus', cost: { clay: 3, glass: 1 }, points: 3, military: 2 },
  { id: 'lighthouse', name: 'The Lighthouse', cost: { stone: 1, wood: 1, glass: 1 }, points: 4 },
  { id: 'temple', name: 'Temple of Artemis', cost: { wood: 1, stone: 1, glass: 1 }, points: 12 }
];

const INITIAL_PYRAMID = [
  { card: 0, faceUp: true, row: 0, col: 0 },
  { card: 1, faceUp: false, row: 1, col: 0 },
  { card: 2, faceUp: false, row: 1, col: 1 },
  { card: 3, faceUp: true, row: 2, col: 0 },
  { card: 4, faceUp: true, row: 2, col: 1 },
  { card: 5, faceUp: true, row: 2, col: 2 },
  { card: 6, faceUp: false, row: 3, col: 0 },
  { card: 7, faceUp: false, row: 3, col: 1 },
  { card: 8, faceUp: false, row: 3, col: 2 },
  { card: 9, faceUp: false, row: 3, col: 3 },
  { card: 10, faceUp: true, row: 4, col: 0 },
  { card: 11, faceUp: true, row: 4, col: 1 },
  { card: 12, faceUp: true, row: 4, col: 2 },
  { card: 13, faceUp: true, row: 4, col: 3 },
  { card: 14, faceUp: true, row: 4, col: 4 },
  { card: 15, faceUp: false, row: 5, col: 0 },
  { card: 16, faceUp: false, row: 5, col: 1 },
  { card: 17, faceUp: false, row: 5, col: 2 },
  { card: 18, faceUp: false, row: 5, col: 3 },
  { card: 19, faceUp: false, row: 5, col: 4 },
  { card: 20, faceUp: false, row: 5, col: 5 }
];

const shuffle = (array) => {
  const newArray = [...array];
  for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
};

function SevenWondersDuel() {
  const [gameMode, setGameMode] = useState(null);
  const [gameState, setGameState] = useState(null);
  const [selectedCard, setSelectedCard] = useState(null);
  const [actionMode, setActionMode] = useState(null);
  const [message, setMessage] = useState('');

  const initGame = (mode) => {
    const shuffledCards = shuffle([...CARDS.age1]);
    const shuffledWonders = shuffle([...WONDERS]);

    setGameState({
      mode,
      age: 1,
      currentPlayer: 1,
      pyramid: INITIAL_PYRAMID.map((pos) => ({
        ...pos,
        card: shuffledCards[pos.card],
        taken: false
      })),
      players: {
        1: {
          coins: 7,
          cards: [],
          wonders: shuffledWonders.slice(0, 2),
          builtWonders: [],
          military: 0,
          science: {}
        },
        2: {
          coins: 7,
          cards: [],
          wonders: shuffledWonders.slice(2, 4),
          builtWonders: [],
          military: 0,
          science: {}
        }
      },
      militaryTrack: 0,
      winner: null
    });
    setGameMode(mode);
    setMessage('Player 1 starts! Select a card from the pyramid.');
  };

  const isCardAccessible = (pyramid, position) => {
    if (position.taken) return false;
    const { row, col } = position;
    const belowLeft = pyramid.find(p => p.row === row + 1 && p.col === col && !p.taken);
    const belowRight = pyramid.find(p => p.row === row + 1 && p.col === col + 1 && !p.taken);
    return !belowLeft && !belowRight;
  };

  const getProduction = (player) => {
    const prod = { wood: 0, clay: 0, stone: 0, glass: 0, papyrus: 0 };
    player.cards.forEach(card => {
      if (card.produces) {
        Object.keys(card.produces).forEach(r => {
          prod[r] = (prod[r] || 0) + card.produces[r];
        });
      }
    });
    return prod;
  };

  const canAffordCard = (player, card) => {
    if (!card.cost) return true;
    const prod = getProduction(player);
    let coinsNeeded = card.cost.coin || 0;
    
    ['wood', 'clay', 'stone', 'glass', 'papyrus'].forEach(r => {
      const needed = card.cost[r] || 0;
      const have = prod[r] || 0;
      if (have < needed) {
        coinsNeeded += (needed - have) * 2;
      }
    });
    
    return player.coins >= coinsNeeded;
  };

  const buildCard = (cardPosition) => {
    const card = cardPosition.card;
    const cp = gameState.currentPlayer;
    const player = gameState.players[cp];
    
    if (!canAffordCard(player, card)) {
      setMessage('Cannot afford this card!');
      return;
    }
    
    const prod = getProduction(player);
    let cost = card.cost?.coin || 0;
    
    ['wood', 'clay', 'stone', 'glass', 'papyrus'].forEach(r => {
      const needed = card.cost?.[r] || 0;
      const have = prod[r] || 0;
      if (have < needed) cost += (needed - have) * 2;
    });
    
    const newPyramid = gameState.pyramid.map(p => 
      p === cardPosition ? { ...p, taken: true } : p
    );
    
    let newPlayer = { ...player };
    newPlayer.coins -= cost;
    newPlayer.cards = [...newPlayer.cards, card];
    
    if (card.effect?.coins) newPlayer.coins += card.effect.coins;
    if (card.military) newPlayer.military += card.military;
    if (card.science) {
      newPlayer.science[card.science] = (newPlayer.science[card.science] || 0) + 1;
    }
    
    const newPyramidRevealed = newPyramid.map(p => {
      if (!p.faceUp && isCardAccessible(newPyramid, p)) {
        return { ...p, faceUp: true };
      }
      return p;
    });
    
    const newPlayers = {
      ...gameState.players,
      [cp]: newPlayer
    };
    
    const militaryDiff = newPlayers[1].military - newPlayers[2].military;
    
    if (Object.keys(newPlayer.science).length >= 6) {
      setGameState({ ...gameState, winner: cp, players: newPlayers });
      setMessage(`Player ${cp} wins by Scientific Supremacy!`);
      return;
    }
    
    if (Math.abs(militaryDiff) >= 9) {
      const winner = militaryDiff > 0 ? 1 : 2;
      setGameState({ ...gameState, winner, players: newPlayers, militaryTrack: militaryDiff });
      setMessage(`Player ${winner} wins by Military Supremacy!`);
      return;
    }
    
    const cardsLeft = newPyramidRevealed.filter(p => !p.taken).length;
    if (cardsLeft === 0) {
      endGame(newPlayers, militaryDiff);
      return;
    }
    
    const nextPlayer = cp === 1 ? 2 : 1;
    setGameState({
      ...gameState,
      pyramid: newPyramidRevealed,
      players: newPlayers,
      currentPlayer: nextPlayer,
      militaryTrack: militaryDiff
    });
    
    setSelectedCard(null);
    setActionMode(null);
    setMessage(`Player ${nextPlayer}'s turn`);
    
    if (gameMode === 'ai' && nextPlayer === 2) {
      setTimeout(() => aiTurn({ ...gameState, pyramid: newPyramidRevealed, players: newPlayers, currentPlayer: 2, militaryTrack: militaryDiff }), 1000);
    }
  };

  const discardCard = (cardPosition) => {
    const cp = gameState.currentPlayer;
    const player = gameState.players[cp];
    
    const newPyramid = gameState.pyramid.map(p => 
      p === cardPosition ? { ...p, taken: true } : p
    );
    
    const newPlayer = { ...player, coins: player.coins + 2 + player.builtWonders.length };
    
    const newPyramidRevealed = newPyramid.map(p => {
      if (!p.faceUp && isCardAccessible(newPyramid, p)) {
        return { ...p, faceUp: true };
      }
      return p;
    });
    
    const newPlayers = {
      ...gameState.players,
      [cp]: newPlayer
    };
    
    const cardsLeft = newPyramidRevealed.filter(p => !p.taken).length;
    if (cardsLeft === 0) {
      endGame(newPlayers, gameState.militaryTrack);
      return;
    }
    
    const nextPlayer = cp === 1 ? 2 : 1;
    setGameState({
      ...gameState,
      pyramid: newPyramidRevealed,
      players: newPlayers,
      currentPlayer: nextPlayer
    });
    
    setSelectedCard(null);
    setActionMode(null);
    setMessage(`Player ${nextPlayer}'s turn`);
    
    if (gameMode === 'ai' && nextPlayer === 2) {
      setTimeout(() => aiTurn({ ...gameState, pyramid: newPyramidRevealed, players: newPlayers, currentPlayer: 2 }), 1000);
    }
  };

  const endGame = (players, militaryTrack) => {
    const calcVP = (player) => {
      let vp = 0;
      player.cards.forEach(card => vp += card.points || 0);
      player.builtWonders.forEach(w => vp += w.points || 0);
      vp += Math.floor(player.coins / 3);
      
      if (militaryTrack > 0 && player === players[1]) {
        if (militaryTrack >= 6) vp += 10;
        else if (militaryTrack >= 3) vp += 5;
        else if (militaryTrack >= 1) vp += 2;
      } else if (militaryTrack < 0 && player === players[2]) {
        if (militaryTrack <= -6) vp += 10;
        else if (militaryTrack <= -3) vp += 5;
        else if (militaryTrack <= -1) vp += 2;
      }
      
      Object.values(player.science).forEach(count => {
        const pairs = Math.floor(count / 2);
        vp += pairs * 4;
      });
      
      return vp;
    };
    
    const vp1 = calcVP(players[1]);
    const vp2 = calcVP(players[2]);
    const winner = vp1 > vp2 ? 1 : (vp2 > vp1 ? 2 : null);
    
    setGameState({
      ...gameState,
      winner,
      victoryType: 'points',
      players: {
        ...players,
        1: { ...players[1], finalVP: vp1 },
        2: { ...players[2], finalVP: vp2 }
      },
      militaryTrack
    });
    
    if (winner) {
      setMessage(`Player ${winner} wins with ${winner === 1 ? vp1 : vp2} victory points!`);
    } else {
      setMessage(`Tie game! Both players have ${vp1} victory points.`);
    }
  };

  const aiTurn = (state) => {
    const player = state.players[2];
    const accessible = state.pyramid.filter(p => isCardAccessible(state.pyramid, p) && !p.taken);
    const affordable = accessible.filter(p => canAffordCard(player, p.card));
    
    if (affordable.length > 0) {
      const scored = affordable.map(p => {
        let score = p.card.points || 0;
        if (p.card.military) score += p.card.military * 2;
        if (p.card.science) score += 5;
        return { position: p, score };
      });
      scored.sort((a, b) => b.score - a.score);
      buildCard(scored[0].position);
      return;
    }
    
    if (accessible.length > 0) {
      discardCard(accessible[0]);
    }
  };

  const handleCardClick = (position) => {
    if (gameState.winner) return;
    if (gameMode === 'ai' && gameState.currentPlayer === 2) return;
    
    if (!isCardAccessible(gameState.pyramid, position)) {
      setMessage('Card is not accessible!');
      return;
    }
    
    setSelectedCard(position);
    setActionMode(null);
  };

  if (!gameMode) {
    return (
      <div style={{
        minHeight: '100vh',
        background: 'linear-gradient(135deg, #2c1810 0%, #4a2c1a 50%, #6b4423 100%)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        fontFamily: "'Cinzel', serif",
        color: '#f4e4c1'
      }}>
        <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet" />
        <div style={{ textAlign: 'center', maxWidth: '600px', padding: '40px' }}>
          <h1 style={{ fontSize: '3.5rem', marginBottom: '20px', textShadow: '2px 2px 4px rgba(0,0,0,0.5)', letterSpacing: '2px' }}>
            7 Wonders Duel
          </h1>
          <p style={{ fontSize: '1.2rem', marginBottom: '40px', opacity: 0.9, lineHeight: '1.6' }}>
            Build your civilization through the ages. Achieve victory through military might, scientific discovery, or accumulated glory.
          </p>
          <div style={{ display: 'flex', gap: '20px', justifyContent: 'center' }}>
            <button onClick={() => initGame('pvp')} style={{
              padding: '15px 40px',
              fontSize: '1.2rem',
              background: 'linear-gradient(135deg, #8b6914 0%, #c9a227 100%)',
              border: '2px solid #f4e4c1',
              borderRadius: '8px',
              color: '#2c1810',
              fontWeight: 'bold',
              cursor: 'pointer',
              fontFamily: "'Cinzel', serif",
              boxShadow: '0 4px 8px rgba(0,0,0,0.3)'
            }}>
              Player vs Player
            </button>
            <button onClick={() => initGame('ai')} style={{
              padding: '15px 40px',
              fontSize: '1.2rem',
              background: 'linear-gradient(135deg, #6b4423 0%, #8b6914 100%)',
              border: '2px solid #f4e4c1',
              borderRadius: '8px',
              color: '#f4e4c1',
              fontWeight: 'bold',
              cursor: 'pointer',
              fontFamily: "'Cinzel', serif",
              boxShadow: '0 4px 8px rgba(0,0,0,0.3)'
            }}>
              Player vs AI
            </button>
          </div>
        </div>
      </div>
    );
  }

  if (!gameState) return null;

  const currentPlayer = gameState.players[gameState.currentPlayer];
  const getCardColor = (type) => {
    const colors = {
      brown: '#8b4513',
      gray: '#708090',
      red: '#b22222',
      green: '#228b22',
      blue: '#1e90ff',
      yellow: '#ffd700',
      purple: '#9370db'
    };
    return colors[type] || '#666';
  };

  return (
    <div style={{
      minHeight: '100vh',
      background: 'linear-gradient(135deg, #2c1810 0%, #4a2c1a 50%, #6b4423 100%)',
      padding: '20px',
      fontFamily: "'Cinzel', serif",
      color: '#f4e4c1'
    }}>
      <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet" />
      
      <div style={{ textAlign: 'center', marginBottom: '20px', borderBottom: '2px solid #8b6914', paddingBottom: '15px' }}>
        <h1 style={{ fontSize: '2rem', margin: '0 0 10px 0' }}>Age {gameState.age}</h1>
        {message && (
          <div style={{ padding: '10px', background: 'rgba(139, 105, 20, 0.3)', borderRadius: '4px', fontSize: '1.1rem' }}>
            {message}
          </div>
        )}
      </div>

      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px', marginBottom: '20px' }}>
        {[1, 2].map(playerNum => {
          const player = gameState.players[playerNum];
          const isActive = gameState.currentPlayer === playerNum && !gameState.winner;
          
          return (
            <div key={playerNum} style={{
              background: isActive ? 'rgba(139, 105, 20, 0.3)' : 'rgba(0, 0, 0, 0.3)',
              border: `2px solid ${isActive ? '#c9a227' : '#8b6914'}`,
              borderRadius: '8px',
              padding: '15px'
            }}>
              <h3 style={{ margin: '0 0 10px 0', fontSize: '1.3rem' }}>
                Player {playerNum} {gameMode === 'ai' && playerNum === 2 && '(AI)'}
                {gameState.winner === playerNum && ' üëë'}
              </h3>
              
              <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>
                <Coins size={20} />
                <span style={{ fontSize: '1.1rem' }}>{player.coins}</span>
                <Swords size={20} style={{ marginLeft: '15px' }} />
                <span style={{ fontSize: '1.1rem' }}>{player.military}</span>
              </div>
              
              {Object.keys(player.science).length > 0 && (
                <div style={{ marginBottom: '10px' }}>
                  <div style={{ fontSize: '0.9rem', marginBottom: '5px' }}>Science:</div>
                  <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>
                    {Object.entries(player.science).map(([type, count]) => (
                      <div key={type} style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>
                        <ScienceIcon type={type} size={18} />
                        <span>√ó{count}</span>
                      </div>
                    ))}
                  </div>
                </div>
              )}
              
              <div style={{ fontSize: '0.9rem', marginBottom: '5px' }}>
                Cards: {player.cards.length} | Wonders: {player.builtWonders.length}
              </div>
              
              {gameState.winner && player.finalVP !== undefined && (
                <div style={{ fontSize: '1.2rem', fontWeight: 'bold', marginTop: '10px' }}>
                  Final Score: {player.finalVP}
                </div>
              )}
            </div>
          );
        })}
      </div>

      <div style={{ background: 'rgba(0, 0, 0, 0.3)', borderRadius: '8px', padding: '15px', marginBottom: '20px' }}>
        <div style={{ textAlign: 'center', marginBottom: '10px', fontSize: '1.1rem' }}>Military Track</div>
        <div style={{ position: 'relative', height: '40px' }}>
          <div style={{
            position: 'absolute',
            left: '10%',
            right: '10%',
            top: '50%',
            transform: 'translateY(-50%)',
            height: '4px',
            background: 'linear-gradient(to right, #b22222 0%, #666 50%, #1e90ff 100%)'
          }} />
          {[-9, -6, -3, 0, 3, 6, 9].map(pos => (
            <div key={pos} style={{
              position: 'absolute',
              left: `${50 + (pos / 9) * 40}%`,
              top: '50%',
              transform: 'translate(-50%, -50%)',
              width: '12px',
              height: '12px',
              borderRadius: '50%',
              background: '#8b6914',
              border: '2px solid #f4e4c1'
            }} />
          ))}
          <div style={{
            position: 'absolute',
            left: `${50 + (gameState.militaryTrack / 9) * 40}%`,
            top: '50%',
            transform: 'translate(-50%, -50%)',
            fontSize: '2rem'
          }}>‚öîÔ∏è</div>
        </div>
      </div>

      <div style={{ background: 'rgba(0, 0, 0, 0.3)', borderRadius: '8px', padding: '20px', marginBottom: '20px' }}>
        <h3 style={{ textAlign: 'center', marginBottom: '20px' }}>Card Pyramid</h3>
        <div style={{ display: 'flex', flexDirection: 'column', gap: '10px', alignItems: 'center' }}>
          {[...Array(6)].map((_, rowIdx) => {
            const rowCards = gameState.pyramid.filter(p => p.row === rowIdx);
            return (
              <div key={rowIdx} style={{ display: 'flex', gap: '10px' }}>
                {rowCards.map((position, colIdx) => {
                  const accessible = isCardAccessible(gameState.pyramid, position);
                  const card = position.card;
                  const isSelected = selectedCard === position;
                  
                  if (position.taken) {
                    return <div key={colIdx} style={{ width: '80px', height: '110px', opacity: 0.2 }} />;
                  }
                  
                  return (
                    <div key={colIdx} onClick={() => handleCardClick(position)} style={{
                      width: '80px',
                      height: '110px',
                      background: position.faceUp ? getCardColor(card.type) : '#3a2414',
                      border: `3px solid ${isSelected ? '#ffd700' : (accessible ? '#c9a227' : '#666')}`,
                      borderRadius: '6px',
                      cursor: accessible ? 'pointer' : 'not-allowed',
                      opacity: accessible ? 1 : 0.5,
                      display: 'flex',
                      flexDirection: 'column',
                      alignItems: 'center',
                      justifyContent: 'center',
                      padding: '5px',
                      fontSize: '0.7rem',
                      textAlign: 'center',
                      color: '#fff',
                      boxShadow: isSelected ? '0 0 15px rgba(255, 215, 0, 0.6)' : 'none'
                    }}>
                      {position.faceUp ? (
                        <>
                          <div style={{ fontWeight: 'bold', marginBottom: '3px', fontSize: '0.6rem', lineHeight: '1.1' }}>
                            {card.name}
                          </div>
                          
                          {card.cost && Object.keys(card.cost).length > 0 && (
                            <div style={{ display: 'flex', gap: '2px', marginBottom: '2px', flexWrap: 'wrap', justifyContent: 'center' }}>
                              {Object.entries(card.cost).map(([resource, amount]) => (
                                <div key={resource} style={{ display: 'flex', alignItems: 'center', fontSize: '0.65rem' }}>
                                  {resource === 'coin' ? (
                                    <span>üí∞{amount}</span>
                                  ) : (
                                    <>
                                      <ResourceIcon type={resource} size={12} />
                                      <span style={{ fontSize: '0.6rem' }}>{amount}</span>
                                    </>
                                  )}
                                </div>
                              ))}
                            </div>
                          )}
                          
                          {card.produces && (
                            <div style={{ display: 'flex', gap: '3px', marginBottom: '2px', flexWrap: 'wrap', justifyContent: 'center' }}>
                              {Object.entries(card.produces).map(([resource, amount]) => (
                                <div key={resource} style={{ display: 'flex', alignItems: 'center', background: 'rgba(255,255,255,0.2)', padding: '1px 3px', borderRadius: '2px' }}>
                                  <ResourceIcon type={resource} size={12} />
                                  {amount > 1 && <span style={{ fontSize: '0.6rem', marginLeft: '1px' }}>√ó{amount}</span>}
                                </div>
                              ))}
                            </div>
                          )}
                          
                          <div style={{ display: 'flex', gap: '3px', alignItems: 'center', justifyContent: 'center', flexWrap: 'wrap' }}>
                            {card.points > 0 && <div style={{ fontSize: '0.75rem' }}>‚òÖ{card.points}</div>}
                            {card.military > 0 && <div style={{ fontSize: '0.7rem' }}>‚öîÔ∏è{card.military}</div>}
                            {card.science && <ScienceIcon type={card.science} size={14} />}
                            {card.effect?.coins && <div style={{ fontSize: '0.7rem' }}>+{card.effect.coins}üí∞</div>}
                          </div>
                        </>
                      ) : (
                        <div style={{ fontSize: '1.5rem' }}>?</div>
                      )}
                    </div>
                  );
                })}
              </div>
            );
          })}
        </div>
      </div>

      {selectedCard && !gameState.winner && (
        <div style={{
          background: 'rgba(139, 105, 20, 0.4)',
          border: '2px solid #c9a227',
          borderRadius: '8px',
          padding: '20px',
          marginBottom: '20px'
        }}>
          <h3 style={{ marginTop: 0 }}>Selected: {selectedCard.card.name}</h3>
          
          <div style={{ marginBottom: '15px' }}>
            {selectedCard.card.cost && Object.keys(selectedCard.card.cost).length > 0 && (
              <div style={{ marginBottom: '10px' }}>
                <strong>Cost:</strong>{' '}
                {Object.entries(selectedCard.card.cost).map(([resource, amount]) => (
                  <span key={resource} style={{ marginRight: '10px' }}>
                    {resource === 'coin' ? (
                      <>üí∞ {amount}</>
                    ) : (
                      <>
                        <ResourceIcon type={resource} size={16} /> {amount}
                      </>
                    )}
                  </span>
                ))}
              </div>
            )}
          </div>
          
          <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>
            <button onClick={() => buildCard(selectedCard)} disabled={!canAffordCard(currentPlayer, selectedCard.card)} style={{
              padding: '10px 20px',
              background: '#228b22',
              border: '2px solid #f4e4c1',
              borderRadius: '6px',
              color: '#fff',
              cursor: 'pointer',
              fontFamily: "'Cinzel', serif",
              fontSize: '1rem',
              opacity: canAffordCard(currentPlayer, selectedCard.card) ? 1 : 0.5
            }}>
              Build Card
            </button>
            
            <button onClick={() => discardCard(selectedCard)} style={{
              padding: '10px 20px',
              background: '#666',
              border: '2px solid #f4e4c1',
              borderRadius: '6px',
              color: '#fff',
              cursor: 'pointer',
              fontFamily: "'Cinzel', serif",
              fontSize: '1rem'
            }}>
              Discard (+{2 + currentPlayer.builtWonders.length}üí∞)
            </button>
          </div>
        </div>
      )}

      {gameState.winner && (
        <div style={{
          position: 'fixed',
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
          background: 'rgba(0, 0, 0, 0.8)',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          zIndex: 1000
        }}>
          <div style={{
            background: 'linear-gradient(135deg, #8b6914 0%, #c9a227 100%)',
            padding: '40px',
            borderRadius: '12px',
            textAlign: 'center',
            color: '#2c1810',
            maxWidth: '500px'
          }}>
            <Trophy size={64} style={{ marginBottom: '20px' }} />
            <h2 style={{ fontSize: '2.5rem', marginBottom: '10px' }}>
              Player {gameState.winner} Wins!
            </h2>
            <p style={{ fontSize: '1.3rem', marginBottom: '30px' }}>
              {gameState.victoryType === 'military' && 'Military Supremacy'}
              {gameState.victoryType === 'science' && 'Scientific Supremacy'}
              {gameState.victoryType === 'points' && `${gameState.players[gameState.winner].finalVP} Victory Points`}
            </p>
            <button onClick={() => {
              setGameMode(null);
              setGameState(null);
            }} style={{
              padding: '15px 40px',
              fontSize: '1.2rem',
              background: '#2c1810',
              border: '2px solid #f4e4c1',
              borderRadius: '8px',
              color: '#f4e4c1',
              fontWeight: 'bold',
              cursor: 'pointer',
              fontFamily: "'Cinzel', serif"
            }}>
              New Game
            </button>
          </div>
        </div>
      )}
    </div>
  );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<SevenWondersDuel />);
    </script>
</body>
</html>
